<!doctype HTML>
<html lang="en">
    <head>
        <link href="/css/2022-08-29.css" rel="stylesheet">
        <meta charset="utf-8">
        <meta content="summary" name="twitter:card">
        <meta content="A page from the Substrate manual" name="twitter:description">
        <meta content="https://src-bin.com/img/apple-touch-icon.png" name="twitter:image">
        <meta content="@src_bin" name="twitter:site">
        <meta content="Source &amp; Binary / Substrate manual / Multi-region strategy" name="twitter:title">
        <meta content="width=device-width,initial-scale=1" name="viewport">
        <meta content="A page from the Substrate manual" property="og:description">
        <meta content="https://src-bin.com/img/apple-touch-icon.png" property="og:image">
        <meta content="Source &amp; Binary / Substrate manual / Multi-region strategy" property="og:title">
        <meta content="website" property="og:type">
        <meta content="https://src-bin.com/substrate/manual/multi-region-strategy/" property="og:url">
        <title>Source &amp; Binary / Multi-region strategy</title>
    </head>
    <body>
        <header>
            <h1><a href="/">Source <span class="fancy">&amp;</span> Binary</a></h1>
            <p><a href="mailto:hello@src-bin.com">hello@src-bin.com</a></p>
            <aside>Purveyors&nbsp;of&nbsp;secure,&nbsp;reliable,&nbsp;and&nbsp;compliant&nbsp;cloud&nbsp;infrastructure&nbsp;since&nbsp;2020</aside>
            <nav>
                <ul>
                    <li><a href="/">Benefits</a></li>
                    <li><a href="/substrate/">Features</a></li>
                    <li><a href="/substrate/manual/">Documentation</a></li>
                    <li><a href="/substrate/pricing/">Pricing</a></li>
                    <!--<li><a href="/compliance/">Compliance Workshop</a></li>-->
                </ul>
            </nav>
        </header>

        <section>

<h1>Multi-region strategy</h1>

<p>Substrate is multi-region through and through. It keeps a strict separation between <a href="../global-and-regional-terraform-modules/">global and regional Terraform modules</a>, manages CIDR prefixes and peers VPCs, and helps you implement changes region-by-region. (It&rsquo;s worth noting explicitly, too, that all of this works just fine when using only one&nbsp;region.)</p>

<p><code>substrate bootstrap-network-account</code> allows you to select which regions you&rsquo;re using (see <a href="../adding-a-region/">adding</a> and <a href="../removing-a-region/">removing</a> documentation). But which should you&nbsp;choose?</p>

<p>First things first: You should not simply select every region. For one thing, it won&rsquo;t work due to the hard limits on VPC peering. (Peering multiple domains, each with multiple qualities across every AWS region is possible using Transit Gateway but that is expensive, less reliable, and not currently supported by Substrate.) For another, it will make applying Terraform changes terribly slow. Finally, if you&rsquo;re using NAT Gateways, the costs will pile up to the tune of at least $100 per environment per region per&nbsp;month.</p>

<p>Your first region should be geographically close to a large portion of your customers and in a jurisdiction where they&rsquo;ll accept their data being stored. We hope you&rsquo;ll choose one of the regions AWS guarantees to cover with <a href="https://sustainability.aboutamazon.com/environment/the-cloud?energyType=true">renewable energy or at least credits/offsets</a>:</p>

<ul>
<li>ca-central-1 in&nbsp;Canada</li>
<li>eu-central-1 in&nbsp;Frankfurt</li>
<li>eu-west-1 in&nbsp;Ireland</li>
<li>us-gov-west-1 in the northwestern United&nbsp;States</li>
<li>us-west-2 in&nbsp;Oregon</li>
</ul>

<p>If you&rsquo;re building to maximize reliability and can stomach the engineering cost of building a multi-region system, choose additional regions to suit your durability, geographic, and latency requirements. That may mean adding more regions on the same continent as the one you chose first or spreading yourself all around the&nbsp;world.</p>

<p>By default, when you create service accounts, the generated Terraform code is going to instantiate the domain&rsquo;s regional Terraform module in every region. You can delete some of these <code>module</code> stanzas from <code>root-modules/<em>domain</em>/<em>environment</em>/<em>quality</em>/<em>region</em>/main.tf</code> if you so choose, to the effect of having some regions that run less of your infrastructure than others. This allows, among other things, you to create your own notion of &ldquo;core&rdquo; and &ldquo;edge&rdquo; regions. Substrate will not re-generate the <code>module</code> stanzas you&nbsp;remove.</p>

<p>Underlying all the advice above is this: Do as little in us-east-1 as you possibly can. Ideally, don&rsquo;t even configure us-east-1 as one of your regions and instead only use it via the special <code>aws.us-east-1</code> provider in your global Terraform modules and only then for managing pseudo-global resources from e.g. ACM or Lambda@Edge that must be managed in&nbsp;us-east-1.</p>

        </section>

        <footer>
            <p class="fine-print">&copy; 2020-2022 &mdash; Source <span class="fancy">&amp;</span> Binary&nbsp;LLC</p>
        </footer>
    </body>
</html>
