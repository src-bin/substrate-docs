<!doctype HTML>
<html lang="en">
    <meta charset="utf-8">
    <head>
        <!--<link href="https://src-bin.com/" rel="canonical">-->
        <link href="/css/2022-04-24.css" rel="stylesheet">
        <meta name="twitter:card" content="summary">
        <meta name="twitter:description" content="A page from the Substrate manual">
        <meta name="twitter:image" content="https://src-bin.com/img/apple-touch-icon.png">
        <meta name="twitter:site" content="@src_bin">
        <meta name="twitter:title" content="Source &amp; Binary / Substrate manual / Integrating your original AWS account(s)">
        <!--<meta name="viewport" content="width=device-width,initial-scale=1">-->
        <meta property="og:description" content="A page from the Substrate manual">
        <meta property="og:image" content="https://src-bin.com/img/apple-touch-icon.png">
        <meta property="og:title" content="Source &amp; Binary / Substrate manual / Integrating your original AWS account(s)">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://src-bin.com/substrate/manual/getting-started/integrating-your-original-aws-account/">
        <title>Source &amp; Binary / Integrating your original AWS account(s)</title>
    </head>
    <body>
        <header>
            <h1><a href="/">Source <span class="fancy">&amp;</span> Binary</a></h1>
            <p><a href="mailto:hello@src-bin.com">hello@src-bin.com</a></p>
            <aside>Purveyors&nbsp;of&nbsp;secure,&nbsp;reliable,&nbsp;and&nbsp;compliant&nbsp;cloud&nbsp;infrastructure&nbsp;since&nbsp;2020</aside>
            <nav>
                <ul>
                    <li><a href="/">Benefits</a></li>
                    <li><a href="/substrate/">Features</a></li>
                    <li><a href="/substrate/manual/">Documentation</a></li>
                    <li><a href="/substrate/pricing/">Pricing</a></li>
                    <!--<li><a href="/compliance/">Compliance Workshop</a></li>-->
                </ul>
            </nav>
        </header>

        <section>

<h1>Integrating your original AWS account(s)</h1>

<p>Most likely, you&rsquo;ve already opened (at least) one AWS account(s), and you&rsquo;re probably a little apprehensive about what will happen to it once you adopt Substrate. Let&rsquo;s address the two most common concerns right&nbsp;away:</p>

<ol>
<li>Don&rsquo;t worry, you won&rsquo;t be left maintaining two AWS worlds&nbsp;forever.</li>
<li>Yes, you&rsquo;ll be able to keep your AWS credit&nbsp;balance.</li>
</ol>

<p>In fact, integrating your original AWS account(s) into your new Substrate-managed AWS organization is a good idea for a few&nbsp;reasons:</p>

<ul>
<li>It can quickly improve your security posture if you create an Administrator role there that can be assumed by the Administrator role in your admin account(s), thus allowing you to delete long-lived access keys and uncontrolled IAM users&nbsp;there.</li>
<li>It may simplify some migrations by allowing policies written using the <code>aws:PrincipalOrgID</code> condition key to interoperate with this account. (Don&rsquo;t worry if policies and condition keys are not familiar&nbsp;topics.)</li>
<li>Integrating access to its billing data will give you better visibility into where you&rsquo;re spending money with&nbsp;AWS.</li>
</ul>

<p>You can invite as many AWS accounts as you like into your new Substrate-managed AWS organization but only if you have <em>not</em> configured AWS Organizations manually in those accounts. If you have and you would still like to adopt Substrate, ask us at <a href="&#109;&#x61;&#x69;&#108;&#x74;&#111;:&#104;e&#108;&#108;&#x6F;&#64;&#x73;&#114;&#99;&#45;&#x62;i&#110;&#x2E;&#99;&#111;&#109;">&#104;e&#108;&#108;&#x6F;&#64;&#x73;&#114;&#99;&#45;&#x62;i&#110;&#x2E;&#99;&#111;&#109;</a> and we&rsquo;ll work with you to make everything&nbsp;right.</p>

<p>To begin, you&rsquo;ll need root (not IAM user) login credentials for the AWS Console for the account you wish to invite into your organization. If you don&rsquo;t have them now or you just don&rsquo;t want to do this now, feel free to skip this section and come back to it later. When you&rsquo;re ready,&nbsp;proceed:</p>

<ol>
<li>Open the Accounts page of your&nbsp;Intranet</li>
<li>Assume the OrganizationAdministrator role in your management&nbsp;account</li>
<li>Visit <a href="https://console.aws.amazon.com/organizations/home?#/accounts">https://console.aws.amazon.com/organizations/home?#/accounts</a></li>
<li>Click <strong>Add account</strong></li>
<li>Click <strong>Invite account</strong></li>
<li>Enter the email address of your original AWS account, the one that you&rsquo;re inviting into your organization (or its account number, if you have that&nbsp;handy)</li>
<li>Click <strong>Invite</strong></li>
<li>In an incognito window, sign into the AWS Console using root (not IAM user) credentials for the account you just invited into your&nbsp;organization</li>
<li>In that incognito window, visit <a href="https://console.aws.amazon.com/cloudtrail/home#/dashboard">https://console.aws.amazon.com/cloudtrail/home#/dashboard</a> and delete any existing trails (to avoid very expensive surprises in your consolidated AWS&nbsp;bills)</li>
<li>In that incognito window, visit <a href="https://console.aws.amazon.com/organizations/home#/invites">https://console.aws.amazon.com/organizations/home#/invites</a></li>
<li>Click <strong>Accept</strong></li>
<li>Click <strong>Confirm</strong></li>
</ol>

<p>If you stop here, you&rsquo;ll have integrated billing data from your original AWS account into your organization and you&rsquo;ll have the ability to constrain your original AWS account using service control&nbsp;policies.</p>

<p>To allow your admin accounts to access this original AWS account, proceed as follows, either in the AWS Console or using whatever configuration management tooling you use in your original AWS&nbsp;account:</p>

<ol>
<li>Note all the role ARNs in the table listing your admin accounts in <code>substrate.accounts.txt</code></li>
<li><p>Create a new role named Administrator in your original AWS account with the following assume role policy, substituting your admin account number for <code>ADMIN_ACCOUNT_NUMBER</code> (and adding additional elements to that list if you have multiple admin&nbsp;accounts):</p>

<pre><code>{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {
        "AWS": [
          "arn:aws:iam::ADMIN_ACCOUNT_NUMBER:role/Administrator",
          "arn:aws:iam::ADMIN_ACCOUNT_NUMBER:role/Intranet"
        ]
      },
      "Action": "sts:AssumeRole"
    }
  ]
}
</code></pre></li>
<li><p>Attach the managed AdministratorAccess policy to this new role</p></li>
</ol>

<p>You can follow those steps in the AWS Console or implement this policy using your original AWS account&rsquo;s CloudFormation or Terraform infrastructure. Once you&rsquo;ve done so, reap the security benefits of disabling any long-lived access keys your original AWS account&rsquo;s IAM users&nbsp;have.</p>

<p>After you&rsquo;ve completed these steps, your original AWS account is part of your Substrate-managed AWS organization. It&rsquo;s not presumed to be totally interoperable, though, so Substrate will not take any actions against it automatically. You&rsquo;ll be able to assume roles in it using <code>substrate assume-role -number <em>12-digit-account-number</em></code>, though, which is enough for most folks to realize the security benefits of Substrate by removing all their IAM users and long-lived AWS access&nbsp;keys.</p>

<p><section class="table">
    <section id="previous">
        <p>Previous:<br><a href="../deleting-unnecessary-root-access-keys/">Deleting unnecessary root access keys</a></p>
    </section>
    <section id="next">
        <p>Next:<br><a href="../managing-your-infrastructure-in-service-accounts/">Managing your infrastructure in service accounts</a></p>
    </section>
</section></p>

        </section>

        <footer>
            <p class="fine-print">&copy; 2020-2022 &mdash; Source <span class="fancy">&amp;</span> Binary&nbsp;LLC</p>
        </footer>
    </body>
</html>
