<!doctype HTML>
<html lang="en">
    <head>
        <link href="/css/2022-08-29.css" rel="stylesheet">
        <meta charset="utf-8">
        <meta content="summary" name="twitter:card">
        <meta content="A page from the Substrate manual" name="twitter:description">
        <meta content="https://src-bin.com/img/apple-touch-icon.png" name="twitter:image">
        <meta content="@src_bin" name="twitter:site">
        <meta content="Source &amp; Binary / Substrate manual / Jumping into private networks" name="twitter:title">
        <meta content="width=device-width,initial-scale=1" name="viewport">
        <meta content="A page from the Substrate manual" property="og:description">
        <meta content="https://src-bin.com/img/apple-touch-icon.png" property="og:image">
        <meta content="Source &amp; Binary / Substrate manual / Jumping into private networks" property="og:title">
        <meta content="website" property="og:type">
        <meta content="https://src-bin.com/substrate/manual/jumping-into-private-networks/" property="og:url">
        <title>Source &amp; Binary / Jumping into private networks</title>
    </head>
    <body>
        <header>
            <h1><a href="/">Source <span class="fancy">&amp;</span> Binary</a></h1>
            <p><a href="mailto:hello@src-bin.com">hello@src-bin.com</a></p>
            <aside>Purveyors&nbsp;of&nbsp;secure,&nbsp;reliable,&nbsp;and&nbsp;compliant&nbsp;cloud&nbsp;infrastructure&nbsp;since&nbsp;2020</aside>
            <nav>
                <ul>
                    <li><a href="/substrate/">Substrate</a></li>
                    <li><a href="/substrate/manual/">Documentation</a></li>
                    <li><a href="/substrate/pricing/">Pricing</a></li>
                    <!--<li><a href="/compliance/">Compliance Workshop</a></li>-->
                </ul>
            </nav>
        </header>

        <section>

<h1>Jumping into private networks</h1>

<p>Substrate manages VPCs for each of your environments, as documented in <a href="../networking/">networking</a>, and each of these is constructed with three public and three private subnets. The private subnets, being private, aren&rsquo;t directly accessible from the Internet. And though the public subnets are, it&rsquo;s recommended that the traffic they do allow directly from the public Internet be handled first by ALB, NLB, API Gateway, or the&nbsp;like.</p>

<p>We recommend that you only allow SSH traffic from the public Internet into your admin account. Conveniently, this is exactly how the Instance Factory is meant to be used. So in order to jump into your private networks via SSH, use an EC2 instance from the Instance Factory as a jump&nbsp;box.</p>

<h2>Security groups in your private networks</h2>

<p>Substrate takes care of peering VPCs such that your admin accounts will be able to reach all your other networks. It&rsquo;s up to you, however, to configure security groups to allow access where you want&nbsp;to.</p>

<p>To allow SSH from the Instance Factory, create security group rules that allow TCP traffic on port 22 from 192.168.0.0/16. (All your admin accounts are guaranteed to use that CIDR prefix and all your service accounts are guaranteed not&nbsp;to.)</p>

<h2>In two commands</h2>

<p>First, SSH into an EC2 instance from the Instance Factory using the command it gives you that looks like this: <code>ssh -A ec2-user@ec2-5-6-7-8.us-west-2.compute.amazonaws.com</code></p>

<p>Once you&rsquo;re there, you&rsquo;ll be able to SSH anywhere else in any of your networks that allow SSH from the Instance&nbsp;Factory.</p>

<h2>In one command</h2>

<p>You can rewrite the SSH command generated by the Instance Factory to jump through it to your actual destination: <code>ssh -A -Jec2-user@ec2-5-6-7-8.us-west-2.compute.amazonaws.com <em>destination</em></code></p>

        </section>

        <footer>
            <p class="fine-print">&copy; 2020-2023 &mdash; Source <span class="fancy">&amp;</span> Binary&nbsp;LLC</p>
        </footer>
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-T1M8F1RWMC"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-T1M8F1RWMC');
        </script>
    </body>
</html>
